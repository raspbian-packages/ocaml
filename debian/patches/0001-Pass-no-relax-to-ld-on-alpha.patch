From: Stefano Zacchiroli <zack@debian.org>
Date: Tue, 19 May 2009 17:22:39 +0200
Subject: Pass --no-relax to ld on alpha

Pass the --no-relax option to ld to fix a segfault in initialization
code (bug#338437)
---
 configure | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/configure
+++ b/configure
@@ -448,7 +448,8 @@
   *gcc*,alpha*-*-linux*)
     if cc="$bytecc" sh ./hasgot -mieee; then
       bytecccompopts="-mieee $bytecccompopts";
-    fi;;
+    fi
+    bytecclinkopts="-Wl,--no-relax";;
   *,mips-*-irix6*)
     # Turn off warning "unused library"
     bytecclinkopts="-n32 -Wl,-woff,84";;
@@ -972,6 +973,7 @@
 case "$arch,$nativecc,$system,$model" in
   *,*,nextstep,*)      nativecclinkopts="-posix";;
   *,*,rhapsody,*)      if $arch64; then partialld="ld -r -arch ppc64"; fi;;
+  alpha,gcc*,linux*,*) nativecclinkopts="-Wl,--no-relax";;
   amd64,gcc*,macosx,*) partialld="ld -r -arch x86_64";;
   amd64,gcc*,solaris,*) partialld="ld -r -m elf_x86_64";;
   power,gcc*,elf,ppc)   partialld="ld -r -m elf32ppclinux";;
